C51 COMPILER V9.00   DOT                                                                   05/06/2015 09:33:41 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE DOT
OBJECT MODULE PLACED IN dot.OBJ
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE dot.c BROWSE INCDIR(D:\Keil_v5\C51\INC\STC) DEBUG OBJECTEXTEND

line level    source

   1          /******************************************************************************/
   2          /* 项目名称  : TX-1C扩展板 8x8点阵静态显示0-9                                 */
   3          /* 主控芯片  : STC89C52                                                       */
   4          /* 文件名称  : 8x8Led_Static                                                  */
   5          /* 文件功能  : 8x8点阵显示                                                    */
   6          /* 文件版权  : 北京海克智动科技开发有限公司                                   */
   7          /* 文件版本  :                                                                */
   8          /******************************************************************************/
   9          /**********************************包含头文件**********************************/
  10          #include <config.h> 
  11          /***********************************函数声明***********************************/
  12          //void Ser_IN(unsigned char Data);      //串行数据输入
  13          //void Par_OUT(void);                                   //串行数据输出
  14          /********************************定义变量和数组********************************/
  15          uchar code dot_table[] = {0xfe,0xfd,0xfb,0xf7,0xef,0xdf,0xbf,0x7f}; 
  16          uchar code Digit_Tab[10][8] = 
  17          {  
  18                  {0x00,0x00,0x3E,0x41,0x41,0x3E,0x00,0x00},/*"0",0*/
  19                  {0x00,0x00,0x42,0x7F,0x40,0x00,0x00,0x00},/*"1",1*/
  20                  {0x00,0x00,0x62,0x51,0x49,0x46,0x00,0x00},/*"2",2*/
  21                  {0x00,0x00,0x22,0x49,0x49,0x36,0x00,0x00},/*"3",3*/
  22                  {0x00,0x00,0x38,0x26,0x7F,0x20,0x00,0x00},/*"4",4*/
  23                  {0x00,0x00,0x4F,0x49,0x49,0x31,0x00,0x00},/*"5",5*/
  24                  {0x00,0x00,0x3E,0x49,0x49,0x32,0x00,0x00},/*"6",6*/
  25                  {0x00,0x00,0x03,0x71,0x09,0x07,0x00,0x00},/*"7",7*/
  26                  {0x00,0x00,0x36,0x49,0x49,0x36,0x00,0x00},/*"8",8*/
  27                  {0x00,0x00,0x26,0x49,0x49,0x3E,0x00,0x00},/*"9",9*/
  28          };
  29          /******************************************************************************/
  30          /* 函数名称  : Ser_IN                                                         */
  31          /* 函数描述  : 串行数据输入                                                   */
  32          /* 输入参数  : Data                                                           */
  33          /* 参数描述  : 串行输入的数据                                                 */ 
  34          /* 返回值    : 无                                                             */
  35          /******************************************************************************/
  36          void Ser_IN(unsigned char Data)
  37          {
  38   1              unsigned char i;
  39   1              for(i = 0; i < 8; i++)
  40   1              {
  41   2                      SH_CK = 0;                      //CLOCK_MAX=100MHz
  42   2                      DATA_IN = Data & 0x80;
  43   2                      Data <<= 1;
  44   2                      SH_CK = 1;
  45   2              }
  46   1      }
  47          /******************************************************************************/
  48          /* 函数名称  : Par_OUT                                                        */
  49          /* 函数描述  : 并行数据输出                                                   */
  50          /* 输入参数  : 无                                                             */
  51          /* 参数描述  : 无                                                             */ 
  52          /* 返回值    : 无                                                             */
  53          /******************************************************************************/
  54          void Par_OUT(void)
  55          {
C51 COMPILER V9.00   DOT                                                                   05/06/2015 09:33:41 PAGE 2   

  56   1              ST_CK = 0;
  57   1              ST_CK = 1;
  58   1      }
  59          /******************************************************************************/
  60          /* 函数名称  : main                                                           */
  61          /* 函数描述  : 主函数                                                         */
  62          /* 输入参数  : 无                                                             */
  63          /* 参数描述  : 无                                                             */
  64          /* 返回值    : 无                                                             */
  65          /******************************************************************************/
  66          void dot_main(void) 
  67          { 
  68   1              uchar cnta=0,cntb=0, j, k; 
  69   1              system_init();
  70   1          while(message=='9')
  71   1          {                   
  72   2                      for(cntb=0;cntb<10;cntb++)
  73   2                      {
  74   3                              if(message!='9') break;
  75   3                              _nop_();
  76   3                              j = 250;
  77   3                              k = 250;
  78   3                              do
  79   3                              {
  80   4                                      while (--k);
  81   4                                      for(cnta=0;cnta<8;cnta++)
  82   4                                      {
  83   5                                              //REN=0;
  84   5                                              Ser_IN(dot_table[cnta]);                //8X8点阵列扫描
  85   5                                              Ser_IN(Digit_Tab[cntb][cnta]);          //8X8点阵行送扫描数据
  86   5                                              Par_OUT(); 
  87   5                                              //REN=1;                                //74HC595输出显示
  88   5                                      } 
  89   4                              } 
  90   3                              while(--j) ;                    
  91   3                      }                                                                
  92   2              } 
  93   1      } 
  94          /******************************************************************************/
  95          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    123    ----
   CONSTANT SIZE    =     88    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
